<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <title>raw</title>
  <script src="../raw.js"></script>
  <script src="demo.js"></script>
</head>

<body>
  <script>    
    demo({}, function (app, renderer, camera) {    

      var t = app.create_entity({
        components: {
          'transform': {},
          'terrain': {
            camera: camera.camera,
            renderer: renderer,
            wireframe:false,
            region_size: 512,
            terrain_quality: 4,
            quality_distance: 2000,
            draw_distance: 3000,
            detail_levels: [1, 2, 4, 8, 16, 24],
            region_distance: 8,
            regions_from_image_url: [
              ["res/heightmap10.jpg", -2, -2, 1, 1024, 1024, 4]
            ],
            material: {
              texture_tiles: [
                "res/dirt.jpg",
                "res/grass.jpg",
                "res/mud.jpg",
                "res/stone.jpg"
              ],
              extend: `
vec4 mix_texture_tiles(vec4 tile1,vec4 tile2,vec4 tile3,vec4 tile4,vec3 normal){
	return mix(tile1,mix(read_tile(u_texture_tiles,2.0, 1.0,0.0), tile3,0.25),abs(normal.x));
}
void fragment(void){
  super_fragment();
}
`


            }
          }
        }
      });
      console.log(t);
      app.update_debug_canvas = function (ctx) {
        ctx.fillText(t.terrain.debug_text, 10, 300);

      }


      app.begin_loop(function (delta) {
        app.tick_debug(delta);
      }, 1 / 10);

      
    });

  </script>
</body>
</html>